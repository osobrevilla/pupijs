!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports=jQuery},function(e,t){function r(e){this.data=e,this.limitX=e[0].length,this.limitY=e.length}r.DIRs={right:1,"bottom-right":2,bottom:3,"bottom-left":4,left:5,"top-left":6,top:7,"top-right":8},r.prototype.find=function(e){var t,n,o,a,i=e.replace(/\s+/g,"");e:for(o in this.data)for(n in this.data[o])for(a in r.DIRs)if(t=this._walker(i,r.DIRs[a],1*n,1*o))break e;return t},r.prototype._walker=function(e,t,r,n){var o=[],a=e.toUpperCase().split(""),i=a.length;if(function e(s){if(a[s]==this.data[n][r]&&(o.push({x:r,y:n}),o.length!==i)){switch(t){case 7:n--;break;case 8:n--,r++;break;case 1:r++;break;case 2:n++,r++;break;case 3:n++;break;case 4:n++,r--;break;case 5:r--;break;case 6:n--,r--}r>=0&&r<this.limitX&&n>=0&&n<this.limitY&&e.call(this,++s)}}.call(this,0),o.length===i)return o}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n);const a={image:null,_x:0,_y:0,_w:0,_h:0,dom:{},init:function(){var e=document.createElement("canvas");this.jcrop=null,this.ctx=e.getContext("2d"),this.dom.picker=o()("#picker").on("change",a.onLoadFile),this.dom.read=o()("<button/>").attr("id","read").text("Procesar").on("click",a.process),this.dom.cropper=o()("<div/>").attr("id","cropper").appendTo("body")},process:function(){a.dom.read.detach(),app.read(a.getB64())},addCropper:function(){var e=this;e.dom.cropper.prepend(e.dom.read),this.image=o()(new Image).on("load",function(){a.image.appendTo(e.dom.cropper).Jcrop({onSelect:a._setCoords,onChange:a._setCoords,setSelect:[0,0,100,100]},function(){a.jcrop=this}),a.draw()}),this.img=this.image.get(0)},_setCoords:function(e){a._x=e.x,a._y=e.y,a._w=e.w,a._h=e.h},draw:function(){var e=a.ctx;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.canvas.width=a._w,e.canvas.height=a._h,e.drawImage(a.img,a._x,a._y,a._w,a._h,0,0,a._w,a._h),requestAnimFrame(a.draw)},onLoadFile:function(){a.clear(),a.addCropper(),a.objectURL=URL.createObjectURL(this.files[0]),a.image.attr("src",a.objectURL)},getB64:function(){return this.ctx.canvas.toDataURL("image/jpeg",100)},clear:function(){this.jcrop&&(this.jcrop.destroy(),this.image.remove(),this.jcrop=null,this.image=null),app.clear(),URL.revokeObjectURL(this.objectURL)}};var i=a,s=r(1),c=r.n(s);window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};const l={tableNodes:[],dom:{},searchEnable:!1,init:function(){l.dom.search=o()("#search").on("search",l.search),l.dom.result=o()("#result"),l.dom.status=o()("#status"),l.dom.result.empty(),l.dom.status.text(""),l.pupiResolver=null},read:function(e){l.searchEnable=!1;var t=new Image;t.onload=function(){OCRAD(t,{letters_only:!0,TOTAL_MEMORY:134217728},l.onRead)},i.clear(),l.dom.status.text("Reconociendo.."),t.src=e},onRead:function(e){var t=e.trim().toUpperCase().replace(/ /gm,"").replace(/\|/g,"I").split(/[\r\n]+/).map(function(e){return e.split("")});console.log(e,t),l.pupiResolver=new c.a(t),l.writeTable(t),l.dom.status.text("Resultado")},writeTable:function(e){var t,r,n,a,i=o()("<tr/>"),s=o()("<td/>"),c=document.createDocumentFragment(),u=o()("<table/>");for(n in e){for(a in t=i.clone(),l.tableNodes[n]=[],e[n])(r=s.clone()).text(e[n][a]),t.append(r),l.tableNodes[n][a]=r;c.appendChild(t[0])}this.dom.table=u.append(c),this.dom.result.html(u),this.searchEnable=!0},draw:function(e){var t;for(t in e)l.tableNodes[e[t].y][e[t].x].attr("class","resalt")},search:function(){if(l.searchEnable){this.blur();var e=l.pupiResolver.find(this.value.trim());e&&l.draw(e)}},clear:function(){l.dom.result.empty(),l.dom.status.text("")}};l.init(),i.init()}]);
//# sourceMappingURL=pupijs.js.map
{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///./src/lib/PupiResolver.js","webpack:///./src/lib/inspector.js","webpack:///./src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","PupiResolver","data","this","limitX","length","limitY","DIRs","right","bottom-right","bottom","bottom-left","left","top-left","top","top-right","find","points","x","y","word","replace","searchY","_walker","dir","letters","toUpperCase","split","lettersLen","go","index","push","Inspector","image","_x","_y","_w","_h","dom","init","canvas","document","createElement","jcrop","ctx","getContext","picker","$","on","onLoadFile","read","attr","text","process","cropper","appendTo","detach","app","getB64","addCropper","that","prepend","Image","Jcrop","onSelect","_setCoords","onChange","setSelect","draw","img","w","h","clearRect","width","height","drawImage","requestAnimFrame","clear","objectURL","URL","createObjectURL","files","toDataURL","destroy","remove","revokeObjectURL","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","tableNodes","searchEnable","search","result","status","empty","pupiResolver","src","onload","OCRAD","letters_only","TOTAL_MEMORY","onRead","lines","trim","map","console","log","writeTable","ctr","ctd","tr","td","frag","createDocumentFragment","table","clone","append","appendChild","html","blur"],"mappings":"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","file":"pupijs.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = jQuery;","/*\n * PupiResolver.js\n * Oscar Sobrevilla / oscar.sobrevilla@gmail.com\n * https://github.com/osobrevilla/pupijs\n * MIT License 2015\n */\n\n// Constructor\n// @data: Array<Array>\nfunction PupiResolver(data) {\n\n    this.data = data;\n    this.limitX = data[0].length;\n    this.limitY = data.length;\n}\n\nPupiResolver.DIRs = {\n    \"right\": 1,\n    \"bottom-right\": 2,\n    \"bottom\": 3,\n    \"bottom-left\": 4,\n    \"left\": 5,\n    \"top-left\": 6,\n    \"top\": 7,\n    \"top-right\": 8\n};\n\nPupiResolver.prototype.find = function(value) {\n\n    var points, word = value.replace(/\\s+/g, \"\"),\n        x, y, d;\n\n    searchY: for (y in this.data) {\n        for (x in this.data[y]) {\n            for (d in PupiResolver.DIRs) {\n                points = this._walker(word, PupiResolver.DIRs[d], 1 * x, 1 * y);\n                if (points) {\n                    break searchY;\n                }\n            }\n        }\n    }\n    return points;\n}\n\nPupiResolver.prototype._walker = function(word, dir, x, y) {\n    var points = [],\n        letters = word.toUpperCase().split(\"\"),\n        lettersLen = letters.length;\n\n    function go(index) {\n\n        var ls = letters[index],\n            lf = this.data[y][x];\n\n        if (ls == lf) {\n            points.push({\n                x: x,\n                y: y\n            });\n            if (points.length === lettersLen) {\n                return;\n            }\n        } else {\n            return;\n        }\n\n        switch (dir) {\n\n            case 7: // TOP\n                y--;\n                break;\n\n            case 8: // TOP RIGHT\n                y--;\n                x++;\n                break;\n\n            case 1: // RIGHT\n                x++;\n                break;\n\n            case 2: // BOTTOM RIGHT\n                y++;\n                x++;\n                break;\n\n            case 3: // BOTTOM\n                y++;\n                break;\n\n            case 4: // BOTTOM LEFT\n                y++;\n                x--;\n                break;\n\n            case 5: // LEFT\n                x--;\n                break;\n\n            case 6: // TOP LEFT\n                y--;\n                x--;\n                break;\n        }\n\n        if (x >= 0 && x < this.limitX && y >= 0 && y < this.limitY) {\n            go.call(this, ++index);\n        }\n    }\n\n    go.call(this, 0);\n\n    if (points.length === lettersLen) {\n        return points;\n    }\n}\n","import $ from \"jquery\";\n\nconst Inspector = {\n  image: null,\n  _x: 0,\n  _y: 0,\n  _w: 0,\n  _h: 0,\n  dom: {},\n  init: function() {\n    var canvas = document.createElement(\"canvas\");\n    this.jcrop = null;\n    this.ctx = canvas.getContext(\"2d\");\n    // dom.btnUp = $('#up').on('mousedown mouseup', Inspector.up)\n    // dom.btnDown = $('#down').on('mousedown mouseup', Inspector.down);\n    this.dom.picker = $(\"#picker\").on(\"change\", Inspector.onLoadFile);\n    this.dom.read = $(\"<button/>\")\n      .attr(\"id\", \"read\")\n      .text(\"Procesar\")\n      .on(\"click\", Inspector.process);\n    this.dom.cropper = $(\"<div/>\")\n      .attr(\"id\", \"cropper\")\n      .appendTo(\"body\");\n    //document.body.appendChild(canvas);\n  },\n\n  process: function() {\n    Inspector.dom.read.detach();\n    app.read(Inspector.getB64());\n  },\n\n  addCropper: function() {\n    var that = this;\n    that.dom.cropper.prepend(that.dom.read);\n    this.image = $(new Image()).on(\"load\", function fn() {\n      Inspector.image.appendTo(that.dom.cropper).Jcrop(\n        {\n          onSelect: Inspector._setCoords,\n          onChange: Inspector._setCoords,\n          setSelect: [0, 0, 100, 100]\n        },\n        function() {\n          Inspector.jcrop = this;\n        }\n      );\n      Inspector.draw();\n    });\n    this.img = this.image.get(0);\n  },\n  // contrastImage: function(imageData, contrast) {\n  //\n  //     var data = imageData.data;\n  //     var factor = (259 * (contrast + 255)) / (255 * (259 - contrast));\n  //\n  //     for(var i=0;i<data.length;i+=4)\n  //     {\n  //         data[i] = factor * (data[i] - 128) + 128;\n  //         data[i+1] = factor * (data[i+1] - 128) + 128;\n  //         data[i+2] = factor * (data[i+2] - 128) + 128;\n  //     }\n  //     return imageData;\n  // },\n  _setCoords: function(c) {\n    Inspector._x = c.x;\n    Inspector._y = c.y;\n    Inspector._w = c.w;\n    Inspector._h = c.h;\n    // if (Inspector._w > 0 && Inspector._h > 0){\n    //   console.log(\"e\");\n    //   var imgData = Inspector.contrastImage(Inspector.ctx.getImageData(0, 0, Inspector._w, Inspector._h), 30);\n    //   Inspector.ctx.putImageData(imgData, 0, 0);\n    // }\n  },\n  draw: function() {\n    var ctx = Inspector.ctx;\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.canvas.width = Inspector._w;\n    ctx.canvas.height = Inspector._h;\n    ctx.drawImage(\n      Inspector.img,\n      Inspector._x,\n      Inspector._y,\n      Inspector._w,\n      Inspector._h,\n      0,\n      0,\n      Inspector._w,\n      Inspector._h\n    );\n    requestAnimFrame(Inspector.draw);\n  },\n  onLoadFile: function() {\n    Inspector.clear();\n    Inspector.addCropper();\n    Inspector.objectURL = URL.createObjectURL(this.files[0]);\n    Inspector.image.attr(\"src\", Inspector.objectURL);\n  },\n  // up: function(e) {\n  //   if (e.type === 'mouseup') {\n  //     clearInterval(Inspector.upTimer);\n  //     return;\n  //   }\n  //   Inspector.upTimer = setInterval(function() {\n  //     Inspector._y = Math.max(Inspector._y - 1, -Inspector.image.height() + Inspector.ctx.canvas.height());\n  //   })\n  // },\n  // down: function(e) {\n  //   if (e.type === 'mouseup') {\n  //     clearInterval(Inspector.downTimer);\n  //     return;\n  //   }\n  //   Inspector.downTimer = setInterval(function() {\n  //     Inspector._y = Math.min(Inspector._y + 1, 0);\n  //   })\n  // },\n  getB64: function() {\n    return this.ctx.canvas.toDataURL(\"image/jpeg\", 100);\n  },\n  clear: function() {\n    if (this.jcrop) {\n      this.jcrop.destroy();\n      this.image.remove();\n      this.jcrop = null;\n      this.image = null;\n    }\n    app.clear();\n    URL.revokeObjectURL(this.objectURL);\n  }\n};\n\nexport default Inspector;\n","import $ from \"jquery\";\nimport Inspector from \"./lib/inspector\";\nimport PupiResolver from \"./lib/PupiResolver\";\n\nwindow.requestAnimFrame = (function() {\n  return (\n    window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    function(callback) {\n      window.setTimeout(callback, 1000 / 60);\n    }\n  );\n})();\n\nconst app = {\n  tableNodes: [],\n  dom: {},\n  searchEnable: false,\n  init: function() {\n    app.dom.search = $(\"#search\").on(\"search\", app.search);\n    app.dom.result = $(\"#result\");\n    app.dom.status = $(\"#status\");\n    app.dom.result.empty();\n    app.dom.status.text(\"\");\n    app.pupiResolver = null;\n  },\n  read: function(src) {\n    app.searchEnable = false;\n    var img = new Image();\n    img.onload = function() {\n      OCRAD(\n        img,\n        {\n          letters_only: true,\n          TOTAL_MEMORY: 33554432 * 4\n        },\n        app.onRead\n      );\n    };\n    Inspector.clear();\n    app.dom.status.text(\"Reconociendo..\");\n    img.src = src;\n  },\n  onRead: function(text) {\n    var lines = text\n      .trim()\n      .toUpperCase()\n      .replace(/ /gm, \"\")\n      .replace(/\\|/g, \"I\")\n      .split(/[\\r\\n]+/)\n      .map(function(o) {\n        return o.split(\"\");\n      });\n    console.log(text, lines);\n    app.pupiResolver = new PupiResolver(lines);\n    app.writeTable(lines);\n    app.dom.status.text(\"Resultado\");\n  },\n  writeTable: function(lines) {\n    var ctr,\n      ctd,\n      tr = $(\"<tr/>\"),\n      td = $(\"<td/>\"),\n      frag = document.createDocumentFragment(),\n      table = $(\"<table/>\"),\n      l,\n      c;\n\n    for (l in lines) {\n      ctr = tr.clone();\n      app.tableNodes[l] = [];\n      for (c in lines[l]) {\n        ctd = td.clone();\n        ctd.text(lines[l][c]);\n        ctr.append(ctd);\n        app.tableNodes[l][c] = ctd;\n      }\n      frag.appendChild(ctr[0]);\n    }\n\n    this.dom.table = table.append(frag);\n    this.dom.result.html(table);\n    this.searchEnable = true;\n  },\n  draw: function(points) {\n    var p;\n    for (p in points)\n      app.tableNodes[points[p].y][points[p].x].attr(\"class\", \"resalt\");\n  },\n  search: function() {\n    if (!app.searchEnable) return;\n    this.blur();\n    var points = app.pupiResolver.find(this.value.trim());\n    if (points) app.draw(points);\n  },\n  clear: function() {\n    app.dom.result.empty();\n    app.dom.status.text(\"\");\n  }\n};\n\nexport default () => {\n  app.init();\n  Inspector.init();\n};\n"],"sourceRoot":""}